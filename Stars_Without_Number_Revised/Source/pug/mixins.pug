mixin sectionheader(attrName, label)
	.section-toggle-header
		input(type="checkbox", name=`attr_${attrName}`, value="1", data-i18n-title="SHOW_HIDE", checked)
		h1
			if (label)
				span(data-i18n=label)
			else
				block
	input.hider(type="hidden", name=`attr_${attrName}`, value="1")

mixin stats-input(attrName, label)
	label(class=["stats-input", attributes.class])
		span=label
		input(type=attributes.type || "text", name=`attr_${attrName}`, min=attributes.min, value=attributes.value, readonly= attributes.readonly)

mixin text-input(name, label, extraclass)
	- classes = attributes.class;
	- delete attributes.class;
	label(class=["text-input", classes])
		input(type="text", name=`attr_${name}`, class=extraclass)&attributes(attributes)
		if (label)
			div(data-i18n=label)
		else
			div
				block

mixin text-input-duo(name1, name2, label, attributes2)
	- classes = attributes.class;
	- delete attributes.class;
	.text-input.duo(class=classes)
		input(type="number", name=`attr_${name1}`)&attributes(attributes)
		span /
		input(type="number", name=`attr_${name2}`)&attributes(attributes2)
		if (label)
			div(data-i18n=label)
		else
			div
				block

mixin fake-text-input(label)
	label(class=["text-input", attributes.class])
		block
		div(data-i18n=label)

mixin makeSave(name)
	.blue-button
		input(type="hidden", name=`attr_save_${name}`, value="15")
		button(name=`roll_save_${name}`, type="roll", value=`&{template:swn-save} {{charname=@{name}}} {{title=^{${name.toUpperCase()}_SAVE}}} {{dice=[[1d20]]}} {{save=[[@{save_${name}}]]}}`)
			| v#[span(name=`attr_save_${name}`)]
		div(data-i18n=name.toUpperCase())

mixin makeSkill(skillName, custom, label)
	if (skillName === "dummy")
		.dummy
	else
		- skillPrefix = skillName ? `skill_${skillName}` : "skill";
		.skill
			button(type="roll", name=`roll_${skillPrefix}`, value=`&{template:swn-skill} {{title=${custom ? `@{${skillPrefix}_name}` : `^{${skillName.toUpperCase()}}`}}} {{charname=@{name}}} {{mod=[[@{modifier_query}]]}} {{dice=[[@{${skillPrefix}_specialist} + @{${skillPrefix}}[Skill] + @{modifier_query} @{${skillPrefix}_query}`).invisible-button.display
			.display.flex-center
				input(type="hidden", name=`attr_${skillPrefix}_specialist`, value="2d6").dice
				if (custom)
					span(name=`attr_${skillPrefix}_name`).name
				else
					span(data-i18n=skillName.toUpperCase()).name
				select(name=`attr_${skillPrefix}_query`).query.skills-query-hover
					option(value="@{attribute_query_str}" data-i18n="STRENGTH_SHORT")
					option(value="@{attribute_query_dex}" data-i18n="DEXTERITY_SHORT")
					option(value="@{attribute_query_con}" data-i18n="CONSTITUTION_SHORT")
					option(value="@{attribute_query_int}" data-i18n="INTELLIGENCE_SHORT")
					option(value="@{attribute_query_wis}" data-i18n="WISDOM_SHORT")
					option(value="@{attribute_query_cha}" data-i18n="CHARISMA_SHORT")
					option(value="@{attribute_query_none}" data-i18n="NONE", selected)
				.skills-query-display
					input(type="hidden", name=`attr_${skillPrefix}_query`, value="@{attribute_query_none}")
					span.str  + #[span(data-i18n="STRENGTH_SHORT")]
					span.dex  + #[span(data-i18n="DEXTERITY_SHORT")]
					span.con  + #[span(data-i18n="CONSTITUTION_SHORT")]
					span.int  + #[span(data-i18n="INTELLIGENCE_SHORT")]
					span.wis  + #[span(data-i18n="WISDOM_SHORT")]
					span.cha  + #[span(data-i18n="CHARISMA_SHORT")]
				input(type="hidden", name=`attr_${skillPrefix}`, value="-1").add-plus
				span(name=`attr_${skillPrefix}`).level
			div(class=["edit", custom ? "flex-wrap" : "flex-center"])
				if (custom)
					input(type="text", name=`attr_${skillPrefix}_name`, value=label, data-i18n-placeholder="SKILL_NAME").name
				else
					div(data-i18n=skillName.toUpperCase()).name
				select(name=`attr_${skillPrefix}_query`).query
					option(value="@{attribute_query_str}" data-i18n="STRENGTH_SHORT")
					option(value="@{attribute_query_dex}" data-i18n="DEXTERITY_SHORT")
					option(value="@{attribute_query_con}" data-i18n="CONSTITUTION_SHORT")
					option(value="@{attribute_query_int}" data-i18n="INTELLIGENCE_SHORT")
					option(value="@{attribute_query_wis}" data-i18n="WISDOM_SHORT")
					option(value="@{attribute_query_cha}" data-i18n="CHARISMA_SHORT")
					option(value="@{attribute_query_none}" data-i18n="NONE", selected)
				input(type="number", min="-1", value="-1", name=`attr_${skillPrefix}`).level
				select(name=`attr_${skillPrefix}_specialist`).dice
					option(value="2d6" selected) 2d6
					option(value="3d6d1") 3d6
					option(value="4d6d2") 4d6
					option(value="?{@{translation_numdice}|2d6,2d6|3d6,3d6d1|4d6,4d6d2}", data-i18n="ASK")
