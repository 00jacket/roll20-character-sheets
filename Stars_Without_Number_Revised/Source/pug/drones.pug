fieldset.repeating_drones
	.drone
		.core-box.stats
			+text-input("drone_name", "NAME").important.cols-4
			.text-input.focusinfo.cols-3
				input(type="text", name="attr_drone_model")
				.label(data-i18n="MODEL")
				.details(data-i18n="DRONE_MODEL_BLURB")
			+text-input-duo("drone_HP", "drone_HP_MAX", "HIT_POINTS").important.cols-2
			+text-input("drone_AC", "AC")(type="number", value="10").center
			+text-input("drone_enc", "ENCUMBRANCE_SHORT")(type="number", value="").center
			+text-input("drone_range", "RANGE")(type="number", value="").center.cols-2
			+fake-text-input("NUM_FITTINGS")
				select(name="attr_drone_num_fittings")
					each num in [1,2,3,4,5]
						option(value=num)= num
		.fittings.grey-box.rows-2
			input(type="hidden", name="attr_drone_num_fittings", value="1").num-fittings
			.table-header.rep-grid.fitting-grid
				div(data-i18n="FITTING")
				div(data-i18n="DESCRIPTION")
			each num in [1,2,3,4,5]
				.rep-grid.fitting-grid(class=`fitting-${num}`)
					+text-input(`drone_fitting_${num}_name`)
					+fake-text-input()
						textarea(name=`attr_drone_fitting_${num}_desc`)
		.grey-box.drone-weapons
			.table-header.rep-grid.weapon-grid.edit
				div(data-i18n="ACTIVE?")
				div(data-i18n="WEAPON")
				div(data-i18n="DAMAGE")
				div(data-i18n="BURST")
				div(data-i18n="ATTACK_BONUS_SHORT")
			each num in [1,2,3]			
				.weapon
					input(type="hidden", name=name=`attr_drone_weapon${num}_active`, value="0").hider
					.display
						button(type="roll", name=`roll_drone_weapon${num}_attack`, value!=`&{template:swn-attack} {{charname=@{drone_name} (^{DRONE})}} {{title=@{drone_weapon${num}_name}}}  {{attack=[[1d20 + @{drone_weapon${num}_attack}[AB] + @{intelligence_mod}[Intelligence] @{drone_weapon${num}_burst} @{modifier_query}]]}} {{damage=[[@{drone_weapon${num}_damage} + @{intelligence_mod}[Intelligence] @{drone_weapon${num}_burst}]]}} {{burst=[[0@{drone_weapon${num}_burst}]]}} {{mod=[[0 @{modifier_query}]]}}`).invisible-button
						div
							span(name=`attr_drone_weapon${num}_name`).name.space-after
							input(type="hidden", name=`attr_drone_weapon${num}_attack`, value="0").add-plus
							span(name=`attr_drone_weapon${num}_attack`).space-after
							| (#[span(name=`attr_drone_weapon${num}_damage`)] #[span(data-i18n="DAMAGE").lower]),
					.edit.weapon-grid.rep-grid
						+fake-text-input().center
							input(type="checkbox", name=`attr_drone_weapon${num}_active`, value="1")
						+text-input(`drone_weapon${num}_name`)
						+text-input(`drone_weapon${num}_damage`)(value="0")
						+fake-text-input()
							select(name=`attr_drone_weapon${num}_burst`)
								option(value="", data-i18n="NO", selected)
								option(value="@{burst_query}", data-i18n="ASK")
								option(value="+ 2[Burst]", data-i18n="ALWAYS")
						+text-input(`drone_weapon${num}_ab`)(type="number", value="0")
