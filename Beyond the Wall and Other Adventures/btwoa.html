<script type="text/worker">

var mods = {
    1: -4,
    2: -3,
    3: -3,
    4: -2,
    5: -2,
    6: -1,
    7: -1,
    8: -1,
    9: 0,
    10: 0,
    11: 0,
    12: 0,
    13: 1,
    14: 1,
    15: 1,
    16: 2,
    17: 2,
    18: 3,
    19: 3
};

on("change:str change:dex change:con change:int change:wis change:cha", function() {
    getAttrs(["str", "dex", "con", "int", "wis", "cha"], function(values) {
        setAttrs({
            tmp_str_mod: mods[values.str],
            tmp_dex_mod: mods[values.dex],
            tmp_con_mod: mods[values.con],
            tmp_int_mod: mods[values.int],
            tmp_wis_mod: mods[values.wis],
            tmp_cha_mod: mods[values.cha]
        });
    });
});

</script>

<div class="sheet-body">
    <div class="sheet-row">
    	<table>
    		<tr>
    			<td><label class="sheet-header">Name: </label></td>
    			<td><input tabindex=1 type="text" class="sheet-input-line" name="attr_name" /></td>
    		
    			<td><label class="sheet-header">Alignment: </label></td>
    			<td>
    				<select tabindex=5 class="sheet-input-line" name="attr_alignment">
    					<option name="law">Law</option>
    					<option name="neutrality">Neutrality</option>
    					<option name="chaos">Chaos</option>
    				</select>
    			</td>
    		
    		</tr>
    		
    		<tr>
    			<td><label class="sheet-header">Player: </label></td>
    			<td><input tabindex=2 type="text" class="sheet-input-line" name="attr_player" /></td>
    			
    			<td><label class="sheet-header">Experience: </label></td>
    			<td><input tabindex=6 type="text" class="sheet-input-line" name="attr_experience" /></td>
    		</tr>
    		
    		<tr>
    			<td><label class="sheet-header">Class: </label></td>
    			<td><select tabindex=3 class="sheet-input-line" name="attr_class">
    					<option name="warrior">Warrior</option>
    					<option name="rogue">Rogue</option>
    					<option name="mage">Mage</option>
    				</select>
    			</td>
    			
    			<td><label class="sheet-header">Base Attack Bonus:</label></td>
    			<td><input tabindex=7 type="number" class="sheet-input-line" style="width: 100%" name="attr_bab" min=1 value=0 /></td>
    		</tr>
    		
    		
    		<tr>
    			<td><label class="sheet-header">Level: </label></td>
    			<td><input tabindex=4 type="number" class="sheet-input-line" style="width: 100%" name="attr_level" min=1 max=10 value=1 /></td>
    			
    			<td><label class="sheet-header">Initiative: </label></td>
    			<td><input tabindex=8 type="number" class="sheet-input-line" style="width: 100%" name="attr_initiative"  value=0 /></td>
    		</tr>
    	
    	</table>
    
    </div>
    <hr />
    <div class="sheet-2colrow" >
        <div class="sheet-col sheet-right-border">
            <table>
                <tr>
                    <td><label class="sheet-attr">Strength</label></td>
                    <td style="text-align: center;"><input type="number" class="sheet-attr-number" min=1 max=19 value=10 name="attr_str" /></td>
                    <td style="text-align: center">
                        <input type="hidden" name="attr_tmp_str_mod" value=0>
                        <input type="number" name="attr_str_mod" class="sheet-attr-mod" value="@{tmp_str_mod}" disabled=true>
                            
                        </label>
                    </td>
                    <td>
                            <p class="sheet-attr-extra">melee to hit</p>
                            <p class="sheet-attr-extra">melee damage</p>
                    </td>
                </tr>
    
                <tr>
                    <td><label class="sheet-attr">Dexterity</label></td>
                    <td style="text-align: center;"><input type="number" class="sheet-attr-number" min=1 max=19 value=10 name="attr_dex" /></td>
                    <td style="text-align: center">
                        <input type="hidden" name="attr_tmp_dex_mod" value=0>
                        <input type="number" name="attr_dex_mod" class="sheet-attr-mod" value="@{tmp_dex_mod}" disabled=true>
                            
                        </label>
                    </td>
                    <td>
                            <p class="sheet-attr-extra">ranged to hit</p>
                            <p class="sheet-attr-extra">armor class</p>
                            <p class="sheet-attr-extra">initiative</p>
                    </td>
                </tr>
                
                <tr>
                    <td><label class="sheet-attr">Constitution</label></td>
                    <td style="text-align: center;"><input type="number" class="sheet-attr-number" min=1 max=19 value=10 name="attr_con" /></td>
                    <td style="text-align: center">
                        <input type="hidden" name="attr_tmp_con_mod" value=0>
                        <input type="number" name="attr_con_mod" class="sheet-attr-mod" value="@{tmp_con_mod}" disabled=true>
                            
                        </label>
                    </td>
                    <td>
                            <p class="sheet-attr-extra">hit points per level</p>
                    </td>
                </tr>
                
                <tr>
                    <td><label class="sheet-attr">Intelligence</label></td>
                    <td style="text-align: center;"><input type="number" class="sheet-attr-number" min=1 max=19 value=10 name="attr_int" /></td>
                    <td style="text-align: center">
                        <input type="hidden" name="attr_tmp_int_mod" value=0>
                        <input type="number" name="attr_int_mod" class="sheet-attr-mod" value="@{tmp_int_mod}" disabled=true>
                            
                        </label>
                    </td>
                    <td>
                            <p class="sheet-attr-extra">languages known</p>
                    </td>
                </tr>
                
                <tr>
                    <td><label class="sheet-attr">Wisdom</label></td>
                    <td style="text-align: center;"><input type="number" class="sheet-attr-number" min=1 max=19 value=10 name="attr_wis" /></td>
                    <td style="text-align: center">
                        <input type="hidden" name="attr_tmp_wis_mod" value=0>
                        <input type="number" name="attr_wis_mod" class="sheet-attr-mod" value="@{tmp_wis_mod}" disabled=true>
                            
                        </label>
                    </td>
                    <td>
                            <p class="sheet-attr-extra">save vs mind control</p>
                    </td>
                </tr>
                
                <tr>
                    <td><label class="sheet-attr">Charisma</label></td>
                    <td style="text-align: center;"><input type="number" class="sheet-attr-number" min=1 max=19 value=10 name="attr_cha" /></td>
                    <td style="text-align: center">
                        <input type="hidden" name="attr_tmp_cha_mod" value=0>
                        <input type="number" name="attr_cha_mod" class="sheet-attr-mod" value="@{tmp_cha_mod}" disabled=true>
                            
                        </label>
                    </td>
                    <td>
                            <p class="sheet-attr-extra">max # of allies</p>
                    </td>
                </tr>
                
            </table>
            <hr />
           <table>
               <thead>
                   <tr>
                       <th colspan=5 class="sheet-sub-header sheet-save-table">Saving Throws</th>
                   </tr>
               </thead>
               <tbody>
                   <tr>
                       <td class="sheet-save-table">
                            <div class="sheet-circle">
                                <input type="number" class="sheet-save-input" name="attr_save_poison" min=1 value=1 />  
                            </div>
                            <label class="sheet-save-labels">Poison</label>
                        </td>
                        
                        <td class="sheet-save-table" />
                        
                        <td class="sheet-save-table">
                            <div class="sheet-circle">
                                <input type="number" class="sheet-save-input" name="attr_save_bweapon" min=1 value=1 />  
                            </div>
                            <label class="sheet-save-labels">Breath Weapon</label>
                        </td>
                   
                        <td class="sheet-save-table" />
                        
                        <td class="sheet-save-table">
                            <div class="sheet-circle">
                                <input type="number" class="sheet-save-input" name="attr_save_poly" min=1 value=1 />  
                            </div>
                            <label class="sheet-save-labels">Polymorph</label>
                        </td>
                    </tr>
                    
                    <tr>
                        <td class="sheet-save-table" />
                        
                        <td class="sheet-save-table">
                            <div class="sheet-circle">
                                <input type="number" class="sheet-save-input" name="attr_save_poly" min=1 value=1 />  
                            </div>
                            <label class="sheet-save-labels">Spell</label>
                        </td>
                        
                        <td class="sheet-save-table"/>
                        
                        <td class="sheet-save-table">
                            <div class="sheet-circle">
                                <input type="number" class="sheet-save-input" name="attr_save_poly" min=1 value=1 />  
                            </div>
                            <label class="sheet-save-labels">Magic Item</label>
                        </td>
                        
                        <td class="sheet-save-table" />
                    </tr>
               </tbody>
            </table>
            <hr />
            <div class="sheet-sub-header">Weapons</div>
            <div class="sheet-table">
                <fieldset class="repeating_weapons">
                    <div class="sheet-table-row">
                        <div class="sheet-table-cell">
                            <input type="text" class="sheet-input-line" name="attr_weapon_name" />
                        </div>
                        <div class="sheet-table-cell">
                            <input type="number" class="sheet-input-line" name="attr_weapon_tohit" />
                            <div>to hit</div>
                        </div>
                        <div class="sheet-table-cell">
                            <input type="text" style="width: 100%"class="sheet-input-line" name="attr_weapon_damage" />
                            <div>damage</div>
                        </div>
                    </div>
                </fieldset>
            </div>
        
        </div>
        
        <div class="sheet-col">
            <div class="sheet-table">
                <div class="sheet-table-row">
                    <div class="sheet-table-cell sheet-thirds center">
                        <input class="sheet-input-ac" type="number" value=0 name="attr_ac" />
                        <label class="sheet-save-labels" for="attr_ac">Armor Class</label>
                    </div>
                    <div class="sheet-table-cell sheet-thirds center">
                        <input class="sheet-input-fp" type="number" value=0 name="attr_fp" />
                        <label class="sheet-save-labels" for="attr_ac">Fortune Points</label>
                    </div>
                    <div class="sheet-table-cell sheet-thirds center">
                        <div class="sheet-table">
                            <div class="sheet-table-row">
                                <div class="sheet-table-cell">
                                    <input class="sheet-input-hpmax" type="number" value=0 name="attr_hp_max" />
                                    <label class="sheet-save-labels" for="attr_ac">Hit Points</label> 
                                </div>    
                                <div class="sheet-table-cell">
                                    <input class="sheet-input-hpcurrent" type="number" value=0 name="attr_hp_current" />
                                    <label class="sheet-save-labels" for="attr_ac">Current</label> 
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <hr />
            <div class="sheet-list-header">Skills:</div>
            <textarea name="attr_skills" placeholder="Skill name (attribute) +2/+4" class="sheet-area-lines sheet-area-small sheet-notes"></textarea>
            <div class="sheet-list-header">Class Abilities:</div>
            <textarea name="attr_class_abilities" placeholder="Name, description" class="sheet-area-lines sheet-area-medium sheet-notes"></textarea>
            <hr />
            <div class="sheet-sub-header">Magic</div>
            <div class="sheet-small-list-header">Cantrips:</div>
            <textarea name="attr_cantrips" class="sheet-area-lines sheet-area-small sheet-notes"></textarea>
            <div class="sheet-small-list-header">Spells:</div>
            <textarea name="attr_spells" class="sheet-area-lines sheet-area-medium sheet-notes"></textarea>
            <div class="sheet-small-list-header">Rituals:</div>
            <textarea name="attr_rituals" class="sheet-area-lines sheet-area-medium sheet-notes"></textarea>
        </div>
    </div>
    <hr />
    <div class="sheet-row">
        <div class="sheet-list-header">Traits</div>
        <textarea name="attr_traits" placeholder="Name, description, bonuses" class="sheet-area-lines sheet-area-medium sheet-notes"></textarea>
    </div>
    <hr />
    <div class="sheet-2colrow">
        <div class="sheet-col sheet-right-border">
            <div class="sheet-list-header">Equipment</div>
            <textarea name="attr_equipment" placeholder="Name, quantity, weight" class="sheet-area-lines sheet-area-large sheet-notes"></textarea>
            <div style="text-align:center;">
                <img style="max-height: 150px" src="https://i.imgur.com/whKdPgO.png">
            </div>
        </div>
        <div class="sheet-col">
            <div class="sheet-list-header">Allies and Henchmen</div>
            <textarea name="attr_allies" placeholder="Name, type, description" class="sheet-area-lines sheet-area-medium sheet-notes"></textarea>
            <hr />
            <div class="sheet-list-header">Notes and History</div>
            <textarea name="attr_notes" placeholder="Pour your heart out" class="sheet-area-lines sheet-area-large sheet-notes"></textarea>
        </div>
    </div>
</div>