<rolltemplate class="sheet-rolltemplate-5e-shaped">
  <div class="rt-card">
    <div class="rt-header relative{{#action}} action{{/action}}{{#spell}} spell{{/spell}}{{#ability}} ability{{/ability}}{{#save}} save{{/save}}{{#death_save}} death-save{{/death_save}}">
      <div class="rt-title">{{title}}</div>
      {{#show_character_name}}
        <div class="rt-subheader">{{character_name}}</div>
      {{/show_character_name}}

      {{#spell}}
        <div class="rt-subheader">{{friendly_level}}{{#cast_as_level}} (as {{cast_as_level}}){{/cast_as_level}}{{#school}} &bullet; {{school}}{{/school}}{{#ritual}} (ritual){{/ritual}}</div>
      {{/spell}}

      {{#action}}
        <div class="rt-subheader">
          {{#reach}}
            {{reach}} reach
          {{/reach}}
          {{#range}}
            {{#reach}} &bullet; {{/reach}}
            {{range}} range
          {{/range}}
          {{#ammo}}
            &bullet;
            {{ammo}} ammo
          {{/ammo}}
        </div>
        {{#target}}
          <div class="rt-subheader">{{target}}</div>
        {{/target}}
      {{/action}}
      {{#subheader}}
        <div class="rt-subheader">{{subheader}}</div>
      {{/subheader}}
      {{#targetName}}
        <div class="rt-subheader">vs {{targetName}}</div>
      {{/targetName}}
    </div>
    {{#emote}}
      <p class="rt-emote">{{character_name}} {{emote}}</p>
    {{/emote}}
    <div class="rt-content">
      {{#spell}}
        {{#casting_time}}
          <div>
            <span class="bold">Casting Time:</span>
            {{casting_time}}
          </div>
        {{/casting_time}}
        {{#range}}
          <div>
            <span class="bold">Range:</span>
            {{range}}
          </div>
        {{/range}}
        {{#components}}
          <div>
            <span class="bold">Components:</span>
            {{components}}
            {{#materials}}({{materials}}){{/materials}}
          </div>
        {{/components}}
        {{#duration}}
          <div>
            <span class="bold">Duration:</span>
            {{duration}}
          </div>
        {{/duration}}
        {{#target}}
          <div>
            <span class="bold">Target:</span>
            {{target}}
          </div>
        {{/target}}
      {{/spell}}

      {{#description}}
        <div class="mar-t-md">{{description}}</div>
      {{/description}}

      {{#roll_toggle}}
        <div class="shaped-row">
          <div class="output col-{{#only_roll_1}}100{{/only_roll_1}}{{^only_roll_1}}50{{/only_roll_1}}">
            {{^only_roll_1}}
              {{#rollGreater() roll1 roll2}}
                <div class="greater-than">{{roll1}}</div>
              {{/rollGreater() roll1 roll2}}
            {{/only_roll_1}}
            {{#only_roll_1}}
              <div>{{roll1}}</div>
            {{/only_roll_1}}
          </div>
          {{^only_roll_1}}
            <div class="output col-50 border-left{{#advantage}} advantage-set{{#rollGreater() roll2 roll1}} adv{{/rollGreater() roll2 roll1}}{{/advantage}}{{#disadvantage}} disadvantage-set{{#rollLess() roll2 roll1}} disadv{{/rollLess() roll2 roll1}}{{/disadvantage}}">
              {{#rollGreater() roll2 roll1}}
                <div class="greater-than">{{roll2}}</div>
              {{/rollGreater() roll2 roll1}}
            </div>
          {{/only_roll_1}}
        </div>
        {{#vs_ac}}
          <div class="output-small-label center">vs AC{{#targetAC}} {{targetAC}}{{/targetAC}}</div>
          <hr>
        {{/vs_ac}}
      {{/roll_toggle}}


      {{#saving_throw_toggle}}
        <div class="mar-t-sm"></div>
        {{#saving_throw_condition}}
          <div class="center output-small-label">{{saving_throw_condition}}</div>
        {{/saving_throw_condition}}
        {{#saving_throw_dc}}
          <div class="center">
            <span class="output">
              <span class="no-class{{#hide_saving_throw_dc}} gm-info-inline-block{{/hide_saving_throw_dc}}">DC {{saving_throw_dc}}</span>
              {{saving_throw_vs_ability}}
            </span>
          </div>
          <div class="center">saving throw</div>
        {{/saving_throw_dc}}

        {{#saving_throw_failure}}
          <div class="center{{#hide_saving_throw_failure}} gm-info-block{{/hide_saving_throw_failure}}">
            <span class="bold italic">Save Failure.</span>
            {{saving_throw_failure}}
          </div>
        {{/saving_throw_failure}}

        {{#saving_throw_success}}
          <div class="center{{#hide_saving_throw_success}} gm-info-block{{/hide_saving_throw_success}}">
            <span class="bold italic">Save Success.</span>
            {{saving_throw_success}}
          </div>
        {{/saving_throw_success}}
        <hr>
      {{/saving_throw_toggle}}

      {{#damage_toggle}}
        <div class="shaped-row zebra center vert-center">
          <div class="col-{{^second_damage}}100{{/second_damage}}{{#second_damage}}47{{/second_damage}}">
            <div class="output">{{damage}}
              {{#roll_toggle}}
                {{#rollWasCrit() roll1}}
                  <span>+ {{crit_damage}}</span>
                {{/rollWasCrit() roll1}}
                {{#rollWasCrit() roll2}}
                  {{#^rollWasCrit() roll1}}
                    <span>+ {{crit_damage}}</span>
                  {{/^rollWasCrit() roll1}}
                {{/rollWasCrit() roll2}}
              {{/roll_toggle}}
            </div>
            <div class="output-small-label">{{damage_type}}{{^damage_type}}damage{{/damage_type}}</div>
          </div>
          {{#second_damage_toggle}}
            <div class="col-06 output">
              +
            </div>
            <div class="col-47">
              <div class="output">{{second_damage}}
                {{#roll_toggle}}
                  {{#rollWasCrit() roll1}}
                    <span>+ {{second_crit_damage}}</span>
                  {{/rollWasCrit() roll1}}
                  {{#rollWasCrit() roll2}}
                    {{#^rollWasCrit() roll1}}
                      <span>+ {{second_crit_damage}}</span>
                    {{/^rollWasCrit() roll1}}
                  {{/rollWasCrit() roll2}}
                {{/roll_toggle}}
              </div>
              <div class="output-small-label">{{second_damage_type}}{{^second_damage_type}}damage{{/second_damage_type}}</div>
            </div>
          {{/second_damage_toggle}}
        </div>
      {{/damage_toggle}}

      {{#healing}}
        <div class="center">
          <span class="bold italic">Healing.</span>
          {{healing}} HP
        </div>
      {{/healing}}
      {{#effect}}
        <div class="center{{#hide_effect}}gm-info-block{{/hide_effect}}">
          <span class="bold italic">Effect.</span>
          {{effect}}
        </div>
      {{/effect}}
      {{#recharge}}
        <div class="center{{#hide_recharge}}gm-info-block{{/hide_recharge}}">
          <span class="bold italic">Recharge.</span>
          {{recharge}}
        </div>
      {{/recharge}}

      {{#death_saving_throw_successes}}
        <div class="center">
          Successes {{death_saving_throw_successes}} / 3
        </div>
      {{/death_saving_throw_successes}}
      {{#death_saving_throw_failures}}
        <div class="center">
          Failures {{death_saving_throw_failures}} / 3
        </div>
      {{/death_saving_throw_failures}}

      {{#text}}
        <div class="center">{{text}}</div>
      {{/text}}
      {{#text_big}}
        <div class="output center">{{text_big}}</div>
      {{/text_big}}

      {{#freetext}}
        <div class="center">{{freetext}}</div>
      {{/freetext}}

      {{#allprops() freetext text text_big character_name save title show_character_name subheader roll_toggle roll1 roll2 only_roll_1 advantage disadvantage vs_ac ability emote death_save death_saving_throw_successes death_saving_throw_failures targetAC targetName action type damage_toggle damage damage_type crit_damage crit_damage_adv second_damage_toggle second_damage second_damage_type second_crit_damage second_crit_damage_adv ranged damage critdamage target reach range ammo ammo_auto ammo_field spell saving_throw_toggle saving_throw_condition saving_throw_dc save saving_throw_vs_ability saving_throw_success saving_throw_failure friendly_level school concentration ritual description cast_as_level healing casting_time duration components materials effect hide_saving_throw_dc hide_saving_throw_failure hide_saving_throw_success hide_effect recharge hide_recharge}}
        <div class="center">
          {{key}}
          {{value}}
        </div>
      {{/allprops() freetext text text_big character_name save title show_character_name subheader roll_toggle roll1 roll2 only_roll_1 advantage disadvantage vs_ac ability emote death_save death_saving_throw_successes death_saving_throw_failures targetAC targetName action type damage_toggle damage damage_type crit_damage crit_damage_adv second_damage_toggle second_damage second_damage_type second_crit_damage second_crit_damage_adv ranged damage critdamage target reach range ammo ammo_auto ammo_field spell saving_throw_toggle saving_throw_condition saving_throw_dc save saving_throw_vs_ability saving_throw_success saving_throw_failure friendly_level school concentration ritual description cast_as_level healing casting_time duration components materials effect hide_saving_throw_dc hide_saving_throw_failure hide_saving_throw_success hide_effect recharge hide_recharge}}
    </div>
  </div>
</rolltemplate>