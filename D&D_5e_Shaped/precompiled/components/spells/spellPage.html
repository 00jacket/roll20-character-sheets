<fieldset class="repeating_spell spell">
  <input type="radio" name="attr_base_level" value="0" class="hidden">
  <input type="radio" name="attr_base_level" value="1" class="hidden">
  <input type="radio" name="attr_base_level" value="2" class="hidden">
  <input type="radio" name="attr_base_level" value="3" class="hidden">
  <input type="radio" name="attr_base_level" value="4" class="hidden">
  <input type="radio" name="attr_base_level" value="5" class="hidden">
  <input type="radio" name="attr_base_level" value="6" class="hidden">
  <input type="radio" name="attr_base_level" value="7" class="hidden">
  <input type="radio" name="attr_base_level" value="8" class="hidden">
  <input type="radio" name="attr_base_level" value="9" class="hidden">
  <input type="checkbox" name="attr_ritual" class="hidden" value="Yes" accept="Ritual">

  <input type="radio" name="attr_casting_time" value="reaction" class="hidden">
  <input type="radio" name="attr_casting_time" value="bonus" class="hidden">
  <input type="radio" name="attr_casting_time" value="action" class="hidden">
  <input type="radio" name="attr_casting_time" value="longer" class="hidden">

  <input type="checkbox" name="attr_components_verbal" class="hidden">
  <input type="checkbox" name="attr_components_somatic" class="hidden">
  <input type="checkbox" name="attr_components_material" class="hidden">
  <input type="checkbox" name="attr_concentration" class="hidden">


  <div class="wrap-box compendium-drop-target relative mar-b-md">
    <div class="shaped-row">
      <div class="col-80">
        <input type="text" name="attr_name" class="spell-name" placeholder="name" accept="Name">
      </div>
    </div>
    <div class="shaped-row">
      <div class="col-14">
        <select name="attr_base_level" class="italic no-border" accept="Level">
          <option value="0">Cantrip</option>
          <option value="1">1st-level</option>
          <option value="2">2nd-level</option>
          <option value="3">3rd-level</option>
          <option value="4">4th-level</option>
          <option value="5">5th-level</option>
          <option value="6">6th-level</option>
          <option value="7">7th-level</option>
          <option value="8">8th-level</option>
          <option value="9">9th-level</option>
        </select>
      </div>
      <div class="col-22 center">
        <span class="en">
          <select name="attr_school" class="italic no-border" accept="School">
            <option value="Abjuration">Abjuration</option>
            <option value="Conjuration">Conjuration</option>
            <option value="Divination">Divination</option>
            <option value="Enchantment">Enchantment</option>
            <option value="Evocation">Evocation</option>
            <option value="Illusion">Illusion</option>
            <option value="Necromancy">Necromancy</option>
            <option value="Transmutation">Transmutation</option>
          </select>
        </span>
        <span class="de">
          <select name="attr_school" class="italic no-border" accept="School">
            <option value="Abjuration">Bannzauber</option>
            <option value="Conjuration">Beschwörung</option>
            <option value="Divination">Erkenntniszauber</option>
            <option value="Enchantment">Verzauberung</option>
            <option value="Evocation">Hervorrufung</option>
            <option value="Illusion">Illusion</option>
            <option value="Necromancy">Nekromantie</option>
            <option value="Transmutation">Verwandlung</option>
          </select>
        </span>
        <span class="fr">
          <select name="attr_school" class="italic no-border" accept="School">
            <option value="Abjuration">Abjuration</option>
            <option value="Conjuration">Invocation</option>
            <option value="Divination">Divination</option>
            <option value="Enchantment">Enchantement</option>
            <option value="Evocation">Evocation</option>
            <option value="Illusion">Illusion</option>
            <option value="Necromancy">Necromancie</option>
            <option value="Transmutation">Transmutation</option>
          </select>
        </span>
      </div>
      <div class="mar-l-lg">
        <input type="checkbox" name="attr_ritual" class="toggle-spells-ritual" value="Yes" accept="Ritual"><span class="toggle-spells-ritual">{{'RITUAL' | translate}}</span>
      </div>
      <div class="mar-l-lg">
        <input type="checkbox" name="attr_is_prepared" class="toggle-spells-prepared"><span class="toggle-spells-prepared">{{'PREPARED' | translate}}</span>
      </div>
    </div>

    <input type="hidden" name="attr_level_readable">
    <input type="hidden" name="attr_higher_level_query" value="?{Spell Level|1|2|3|4|5|6|7|8|9}">

    <!--put in hidden checkboxes for casting time, components, concentration, and ritual-->

    <div class="spells-toggle-spell inline">
      <div class="shaped-row">
        <span class="bold mar-r-sm">{{'CASTING_TIME' | translate}}:</span>
        <div class="flex-grow center pad-l-sm">
          <input type="text" name="attr_casting_time" class="no-border" accept="Casting Time">
        </div>
      </div>
      <div class="shaped-row">
        <span class="bold mar-r-sm">{{'RANGE' | translate}}:</span>
        <div class="flex-grow center pad-l-sm">
          <input type="text" name="attr_range" class="no-border" accept="Range">
        </div>
      </div>
      <div class="shaped-row">
        <span class="bold mar-r-sm">{{'COMPONENTS' | translate}}:</span>
        <div class="flex-grow center pad-l-sm">
          <input type="text" name="attr_components" class="no-border" accept="Components">
        </div>
        <div class="flex-grow center pad-l-sm">
          <input type="text" name="attr_materials" class="no-border" accept="Material">
        </div>
      </div>
      <div class="shaped-row">
        <span class="bold mar-r-sm">{{'DURATION' | translate}}:</span>
        <div class="flex-grow center pad-l-sm">
          <input type="text" name="attr_duration" class="no-border" accept="Duration">
        </div>
      </div>
      <div class="shaped-row">
        <span class="bold mar-r-sm">{{'TARGET' | translate}}:</span>
        <div class="flex-grow center pad-l-sm">
          <input type="text" name="attr_target" class="no-border" accept="Target">
        </div>
      </div>
      <div class="spell-button-group right">
        <div class="shaped-row">
          <div class="col center">
            <input type="hidden" name="attr_local_attack_bonus" value="0">
            <input type="hidden" name="attr_local_damage_bonus" value="0">
            <input type="hidden" name="attr_proficiency_toggled" value="2">
            <button type="roll" name="roll_spell"
                    value="@{output_option}            &{template:5e-shaped}            {{character_name=@{character_name}}}            @{show_character_name}            {{title=@{name}}}            {{targetAC=@{attacks_vs_target_ac}}}            {{targetName=@{attacks_vs_target_name}}}            {{spell=1}}            @{tie_on_spell}            {{friendly_level=base_level}}            {{school=@{school}}}            {{casting_time=@{casting_time}}}            {{range=@{range}}}            {{components=@{components}}}            {{materials=@{materials}}}            {{duration=@{duration}}}            {{target=@{target}}}            {{description=@{description}}}            @{roll_toggle}            {{vs_ac=1}}            {{roll1=[[d20cs>@{crit_range}@{d20_mod} + @{proficiency_toggled}[proficiency] + @{attack_ability}[ability] + @{attack_bonus}[bonus] + (@{global_attack_bonus})[global attack bonus] + (@{local_attack_bonus})[global attack bonus based on type]]]}}            @{roll_setting}cs>@{crit_range}@{d20_mod} + @{proficiency_toggled}[proficiency] + @{attack_ability}[ability] + @{attack_bonus}[bonus] + (@{global_attack_bonus})[global attack bonus] + (@{local_attack_bonus})[global attack bonus based on type]]]}}            @{saving_throw_toggle}            {{saving_throw_condition=@{saving_throw_condition}}}            {{saving_throw_dc=@{saving_throw_dc}}}            {{saving_throw_vs_ability=@{saving_throw_vs_ability}}}            {{saving_throw_success=@{saving_throw_success}}}            {{targetAC=@{attacks_vs_target_ac}}}   {{targetName=@{attacks_vs_target_name}}}            @{damage_toggle}            {{damage=[[0d0 + @{damage}[damage] + @{damage_ability}[ability] + @{damage_bonus}[bonus] + (@{global_damage_bonus})[global damage bonus] + (@{local_damage_bonus})[global damage bonus based on type]]]}} {{damage_type=@{damage_type}}}            @{second_damage_toggle}            {{second_damage=[[0d0 + @{second_damage}[damage] + @{second_damage_ability}[ability] + @{second_damage_bonus}[bonus]]]}} {{second_damage_type=@{second_damage_type}}}            {{crit_damage=[[0d0 + @{damage_crit}[crit damage]]]}} {{second_crit_damage=[[0d0 + @{second_damage_crit}[crit damage]]]}}            @{extras_toggle}">
              <span>Cast</span>
            </button>

            <!--
            <button type="roll" name="roll_SpellCast"
                    value="{{spellhigherlevel=@{higher_slot_effect}}}   {{damage=[[0d0 + @{spell_attack_dmg}[dmg] + @{spell_attack_dmg_total}[bonus dmg] + (@{global_spell_damage_bonus})[global spell dmg bonus] + ((@{higher_level_query} - @{base_level}) * @{spell_attack_higher_level_dmg_dice})@{spell_attack_higher_level_dmg_die}[higher lvl]]]}} {{second_damage=[[0d0 + @{spell_attack_second_dmg}[dmg] + @{spell_attack_second_dmg_total}[bonus dmg] + (@{global_spell_damage_bonus})[global spell dmg bonus] + ((@{higher_level_query} - @{base_level}) * @{spell_attack_second_higher_level_dmg_dice})@{spell_attack_second_higher_level_dmg_die}[higher lvl]]]}} {{crit_damage=[[0d0 + @{spell_attack_dmg} + ((@{higher_level_query} - @{base_level}) * @{spell_attack_higher_level_dmg_dice})@{spell_attack_higher_level_dmg_die}[higher lvl]]]}} {{second_crit_damage=[[0d0 + @{spell_attack_second_dmg} + ((@{higher_level_query} - @{base_level}) * @{spell_attack_second_higher_level_dmg_dice})@{spell_attack_second_higher_level_dmg_die}[higher lvl]]]}} {{saving_throw_failure=@{saving_throw_failure}}} {{damage=[[0d0 + @{spell_save_dmg}[dmg] + @{spell_save_dmg_total}[bonus dmg] + (@{global_spell_damage_bonus})[global spell dmg bonus] + ((@{higher_level_query} - @{base_level}) * @{spell_save_higher_level_dmg_dice})@{spell_save_higher_level_dmg_die}[higher lvl] ]]}}   {{heal=[[0d0 + @{heal_amount}[amount] + @{heal_ability_bonus}[stat bonus] + @{healbonus}[bonus] + (@{global_spell_heal_bonus})[global spell heal bonus] + ((@{higher_level_query} - @{base_level}) * @{spell_heal_higher_level_amount}) + ((@{higher_level_query} - @{base_level}) * @{spell_heal_higher_level_dmg_dice})@{spell_heal_higher_level_dmg_die}[higher lvl] ]]}}   {{spell_cast_as_level=?{Spell Level}}} ">
            -->
          </div>
        </div>
      </div>
    </div>
    <div class="spells-toggle-spell spells-toggle-spell-details">
      <textarea name="attr_description" class="three-line-textarea" placeholder="description" accept="Content"></textarea>

      <div class="shaped-row relative mar-t-sm">
        <input type="checkbox" name="attr_roll_toggle" value="{{roll_toggle=1}}" class="attack-toggle col-04 absolute" checked>
        <div class="col-04"></div>
        <div class="col-16 bold italic">{{'ATTACK' | translate}}.</div>
        <div class="col-80 attack-toggle">
          <div class="shaped-row">
            <div class="col-12 center pad-r-sm">
              <input type="checkbox" name="attr_proficient" checked>

              <div class="small-label">{{'PROF' | translate}}</div>
            </div>
            <div class="col-22 center pad-r-sm">
              <select name="attr_attack_ability">
                <option value="0">&#8212;</option>
                <option value="@{casting_stat}" selected>Casting Stat</option>
                <option value="@{second_casting_stat}">Secondary Casting Stat</option>
                <option value="@{finesse_mod}">Finesse</option>
                <option value="@{strength_mod}">Str</option>
                <option value="@{dexterity_mod}">Dex</option>
                <option value="@{constitution_mod}">Con</option>
                <option value="@{intelligence_mod}">Int</option>
                <option value="@{wisdom_mod}">Wis</option>
                <option value="@{charisma_mod}">Cha</option>
              </select>
            </div>
            <div class="col-03 center">+</div>
            <div class="col-15 center pad-r-sm">
              <input type="number" name="attr_attack_bonus" class="center" value="0">
            </div>
            <div class="col-20 center pad-l-sm">
              <input type="number" name="attr_crit_range" class="center" value="20" step="1" min="1" max="20">

              <div class="small-label">{{'CRIT_RANGE' | translate}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="shaped-row relative mar-t-sm">
        <input type="checkbox" name="attr_saving_throw_toggle" value="{{saving_throw_toggle=1}}" class="attack-toggle col-04 absolute">
        <div class="col-04"></div>
        <div class="col-16 bold italic">{{'SAVING_THROW' | translate}}.</div>
        <div class="col-80 attack-toggle">
          <div>
            <textarea class="xs-textarea" name="attr_saving_throw_condition" placeholder="if the target is.."></textarea>
          </div>
          <div class="shaped-row vert-center">
            <div class="col-15 center">
              <select name="attr_saving_throw_ability">
                <option value="@{strength_mod}" selected>Str</option>
                <option value="@{dexterity_mod}">Dex</option>
                <option value="@{constitution_mod}">Con</option>
                <option value="@{intelligence_mod}">Int</option>
                <option value="@{wisdom_mod}">Wis</option>
                <option value="@{charisma_mod}">Cha</option>
              </select>
            </div>
            <div class="col-03 center">+</div>
            <div class="col-15 center pad-r-sm">
              <input type="number" name="attr_saving_throw_bonus" value="0">
            </div>
            <div class="col-03 center">
              <span>=</span>
            </div>
            <div class="col-08 center pad-l-sm">
              {{'DC' | translate}}
            </div>
            <div class="col-09 center pad-l-sm pad-r-sm">
              <input type="number" name="attr_saving_throw_dc" readonly>
            </div>
            <div class="col-15 center">
              <select name="attr_saving_throw_vs_ability">
                <option value="Strength" selected>Str</option>
                <option value="Dexterity">Dex</option>
                <option value="Constitution">Con</option>
                <option value="Intelligence">Int</option>
                <option value="Wisdom">Wis</option>
                <option value="Charisma">Cha</option>
              </select>
            </div>
          </div>
          <div>
            <textarea class="xs-textarea" name="attr_saving_throw_success" placeholder="half damage" accept="Save Success"></textarea>
          </div>
        </div>
      </div>

      <div class="shaped-row relative mar-t-sm">
        <input type="checkbox" name="attr_damage_toggle" value="{{damage_toggle=1}}" class="attack-toggle col-04 absolute" checked>
        <div class="col-04"></div>
        <div class="col-16 bold italic">{{'DAMAGE' | translate}}.</div>
        <div class="col-80 attack-toggle">
          <div class="shaped-row">
            <div class="col-12 center pad-r-sm">
              <input type="text" name="attr_damage" class="center" value="0" accept="Damage">
            </div>
            <div class="col-03 center">+</div>
            <div class="col-22 center pad-r-sm">
              <select name="attr_damage_ability">
                <option value="0">&#8212;</option>
                <option value="@{casting_stat}">Casting Stat</option>
                <option value="@{second_casting_stat}">Secondary Casting Stat</option>
                <option value="@{strength_mod}">Str</option>
                <option value="@{dexterity_mod}">Dex</option>
                <option value="@{constitution_mod}">Con</option>
                <option value="@{intelligence_mod}">Int</option>
                <option value="@{wisdom_mod}">Wis</option>
                <option value="@{charisma_mod}">Cha</option>
              </select>
            </div>
            <div class="col-03 center">+</div>
            <div class="col-15 center pad-r-sm">
              <input type="number" name="attr_damage_bonus" value="0">
            </div>
            <div class="col-30 center pad-r-sm">
              <input type="text" name="attr_damage_type" class="center" placeholder="fire" accept="Damage Type">
            </div>
            <div class="col-15 center pad-l-sm">
              <input type="text" name="attr_damage_crit" class="center">

              <div class="small-label">{{'CRIT' | translate}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="shaped-row relative mar-t-sm">
        <input type="checkbox" name="attr_second_damage_toggle" value="{{second_damage_toggle=1}}" class="attack-toggle col-04 absolute">
        <div class="col-04"></div>
        <div class="col-16 bold italic">{{'DAMAGE' | translate}}.</div>
        <div class="col-80 attack-toggle">
          <div class="shaped-row">
            <div class="col-12 center pad-r-sm">
              <input type="text" name="attr_second_damage" class="center" value="0" accept="Secondary Damage">
            </div>
            <div class="col-03 center">+</div>
            <div class="col-22 center pad-r-sm">
              <select name="attr_second_damage_ability">
                <option value="0">&#8212;</option>
                <option value="@{casting_stat}">Casting Stat</option>
                <option value="@{second_casting_stat}">Secondary Casting Stat</option>
                <option value="@{strength_mod}">Str</option>
                <option value="@{dexterity_mod}">Dex</option>
                <option value="@{constitution_mod}">Con</option>
                <option value="@{intelligence_mod}">Int</option>
                <option value="@{wisdom_mod}">Wis</option>
                <option value="@{charisma_mod}">Cha</option>
              </select>
            </div>
            <div class="col-03 center">+</div>
            <div class="col-15 center pad-r-sm">
              <input type="number" name="attr_second_damage_bonus" value="0">
            </div>
            <div class="col-30 center pad-r-sm">
              <input type="text" name="attr_second_damage_type" class="center" placeholder="fire" accept="Secondary Damage Type">
            </div>
            <div class="col-15 center pad-l-sm">
              <input type="text" name="attr_second_damage_crit" class="center">

              <div class="small-label">{{'CRIT' | translate}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="shaped-row relative mar-t-sm">
        <input type="checkbox" name="attr_heal_toggle" value="{{heal_toggle=1}}" class="attack-toggle col-04 absolute">
        <div class="col-04"></div>
        <div class="col-16 bold italic">{{'HEAL' | translate}}.</div>
        <div class="col-80 attack-toggle">
          <div class="shaped-row">
            <div class="col-12 center pad-r-sm">
              <input type="text" name="attr_heal_amount" class="center" value="0" accept="Healing">
            </div>
            <div class="col-03 center">+</div>
            <div class="col-22 center pad-r-sm">
              <select name="attr_heal_ability_bonus">
                <option value="0">&#8212;</option>
                <option value="@{casting_stat}" selected>Casting Stat</option>
                <option value="@{second_casting_stat}">Secondary Casting Stat</option>
                <option value="@{strength_mod}">Str</option>
                <option value="@{dexterity_mod}">Dex</option>
                <option value="@{constitution_mod}">Con</option>
                <option value="@{intelligence_mod}">Int</option>
                <option value="@{wisdom_mod}">Wis</option>
                <option value="@{charisma_mod}">Cha</option>
              </select>
            </div>
            <div class="col-03 center">+</div>
            <div class="col-15 center pad-r-sm">
              <input type="number" name="attr_heal_bonus" value="0">
            </div>
          </div>
        </div>
      </div>

      <div class="shaped-row relative mar-t-sm">
        <input type="checkbox" name="attr_higher_level_toggle" value="{{higher_level=1}}" class="attack-toggle col-04 absolute">
        <div class="col-04"></div>
        <div class="col-16 bold italic">{{'HIGHER_LEVEL' | translate}}.</div>
        <div class="col-80 attack-toggle">
          <div class="shaped-row">
            <div class="col-12 center pad-r-sm">
              <input type="number" name="attr_attack_higher_level_dice" value="0" accept="Higher Spell Slot Dice">

              <div class="small-label">{{'DICE' | translate}}</div>
            </div>
            <div class="col-12 border-right center pad-l-sm pad-r-sm">
              <select name="attr_attack_higher_level_die" accept="Higher Spell Slot Die">
                <option>d2</option>
                <option>d4</option>
                <option selected>d6</option>
                <option>d8</option>
                <option>d10</option>
                <option>d12</option>
                <option>d20</option>
              </select>

              <div class="small-label">{{'DIE' | translate}}</div>
            </div>
            <div class="col-12 center pad-l-sm pad-r-sm">
              <input type="number" name="attr_attack_second_higher_level_dice" value="0" accept="Secondary Higher Spell Slot Dice">

              <div class="small-label">{{'2nd' | translate}} {{'DICE' | translate}}</div>
            </div>
            <div class="col-12 border-right center pad-l-sm pad-r-sm">
              <select name="attr_attack_second_higher_level_die" accept="Secondary Higher Spell Slot Die">
                <option>d2</option>
                <option>d4</option>
                <option selected>d6</option>
                <option>d8</option>
                <option>d10</option>
                <option>d12</option>
                <option>d20</option>
              </select>

              <div class="small-label">{{'2nd' | translate}} {{'DIE' | translate}}</div>
            </div>
            <div class="col-12 center pad-l-sm">
              <input type="text" name="attr_higher_level_heal_amount" class="center" value="0" accept="Higher Level Healing">

              <div class="small-label">{{'FLAT_HEAL' | translate}}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="shaped-row relative mar-t-sm">
        <input type="hidden" name="attr_extas_var" value="{{emote=@{emote}}} @{freeform}">
        <input type="checkbox" name="attr_extras_toggle" value="@{extas_var}" class="attack-toggle col-04 absolute">
        <div class="col-04"></div>
        <div class="col-16 bold italic">{{'EXTRAS' | translate}}.</div>
        <div class="col-80 attack-toggle">
          <div class="center">
            <textarea class="xs-textarea" name="attr_emote"></textarea>

            <div class="small-label">{{'EMOTE' | translate}}</div>
          </div>
          <div class="center mar-t-sm">
            <textarea class="xs-textarea" name="attr_freeform"></textarea>

            <div class="small-label">{{'FREEFORM' | translate}}</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</fieldset>
