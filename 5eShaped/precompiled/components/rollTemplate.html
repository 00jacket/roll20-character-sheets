<rolltemplate class="sheet-rolltemplate-5e-shaped">
  <div class="rt-card">
    <div class="rt-header relative{{#action}} action{{/action}}{{#spell}} spell{{/spell}}{{#ability}} ability{{/ability}}{{#saving_throw}} saving-throw{{/saving_throw}}{{#death_saving_throw}} death-saving-throw{{/death_saving_throw}}">
      <div class="rt-title">{{title}}</div>
      {{#show_character_name}}
        <div class="rt-subheader">{{character_name}}</div>
      {{/show_character_name}}
      {{#spell}}
        <div class="rt-subheader italic">{{friendly_level}}{{#cast_as_level}} (as {{cast_as_level}}){{/cast_as_level}}{{#school}} {{school}}{{/school}}{{#ritual}} (ritual){{/ritual}}</div>
      {{/spell}}
      {{#action}}
        <div class="rt-subheader">
          {{#reach}}{{reach}} <span class="lowercase" data-i18n="REACH">reach</span>{{/reach}}
          {{#range}}{{#reach}} &bullet; {{/reach}}{{range}} <span class="lowercase" data-i18n="RANGE">range</span>{{/range}}
          {{#ammo}}{{#range}} &bullet; {{/range}}{{ammo}} {{#ammo_name}}{{ammo_name}}{{/ammo_name}}{{^ammo_name}}<span class="lowercase" data-i18n="AMMO">ammo</span>{{/ammo_name}}{{/ammo}}
        </div>
      {{/action}}
      {{#uses}}
        <div class="rt-subheader">{{uses}} / {{uses_max}}</div>
      {{/uses}}
      {{#subheader}}
        <div class="rt-subheader">{{subheader}}</div>
      {{/subheader}}
      {{#targetName}}
        <div class="rt-subheader"><span data-i18n="CS"></span> {{targetName}}</div>
      {{/targetName}}
      {{#advantage}}
        <div class="rt-subheader"><span data-i18n="ADVANTAGE"></span></div>
      {{/advantage}}
      {{#disadvantage}}
        <div class="rt-subheader"><span data-i18n="DISADVANTAGE"></span></div>
      {{/disadvantage}}
    </div>
    {{#emote}}
      <p class="rt-emote">{{character_name}} {{emote}}</p>
    {{/emote}}
    <div class="rt-content">
      {{#spell}}
        {{#casting_time}}
          <div class="no-border">
            <span class="bold"><span data-i18n="CASTING_TIME"></span>:</span> <span>{{casting_time}}</span>
          </div>
        {{/casting_time}}
        {{#range}}
          <div class="no-border">
            <span class="bold"><span data-i18n="RANGE"></span>:</span> <span>{{range}}</span>
          </div>
        {{/range}}
        {{#components}}
          <div class="no-border">
            <span class="bold"><span data-i18n="COMPONENTS"></span>:</span>
            {{components}}
            {{#materials}}({{materials}}){{/materials}}
          </div>
        {{/components}}
        {{#duration}}
          <div class="no-border">
            <span class="bold"><span data-i18n="DURATION"></span>:</span>
            <span>{{concentration}}</span>
            <span>{{duration}}</span>
          </div>
        {{/duration}}
        {{#target}}
          <div class="no-border">
            <span class="bold"><span data-i18n="TARGET"></span>:</span> <span>{{target}}</span>
          </div>
        {{/target}}
      {{/spell}}
      {{#content}}
        <div class="mar-t-md{{#hide_spell_content}} gm-info-block{{/hide_spell_content}}">{{content}}</div>
      {{/content}}
      {{#text_top}}
        <div class="output center">{{text_top}}</div>
      {{/text_top}}
      {{#roll1}}
        <div class="shaped-row center{{#hide_attack}} gm-info-flex{{/hide_attack}}">
          <div class="col-{{#roll2}}50{{/roll2}}{{^roll2}}100{{/roll2}} output">{{roll1}}</div>
          {{#roll2}}
            <div class="col-50 output border-left">{{roll2}}</div>
          {{/roll2}}
          {{#vs_ac}}
            <div class="col-100 output-small-label"><span data-i18n="VS"></span> <span data-i18n="AC"></span> {{#targetAC}} {{targetAC}}{{/targetAC}}</div>
          {{/vs_ac}}
        </div>
      {{/roll1}}
      {{#saving_throw_dc}}
        <div class="center">
          {{#saving_throw_condition}}
            <div class="output-small-label">{{saving_throw_condition}}</div>
          {{/saving_throw_condition}}
          {{#saving_throw_dc}}
            <div class="output">
              <span class="{{#hide_saving_throw_dc}}gm-info-inline-block{{/hide_saving_throw_dc}}"><span data-i18n="DC"></span> {{saving_throw_dc}}</span>
              [{{saving_throw_vs_ability}}](~target|shaped_{{saving_throw_vs_ability}}_saving_throw)
            </div>
            <div>saving throw</div>
          {{/saving_throw_dc}}
          {{#saving_throw_failure}}
            <div class="{{#hide_saving_throw_failure}}gm-info-block{{/hide_saving_throw_failure}}">
              <span class="bold italic"><span data-i18n="SAVE_FAILURE"></span>.</span>
              {{saving_throw_failure}}
            </div>
          {{/saving_throw_failure}}
          {{#saving_throw_success}}
            <div class="{{#hide_saving_throw_success}}gm-info-block{{/hide_saving_throw_success}}">
              <span class="bold italic"><span data-i18n="SAVE_SUCCESS"></span>.</span>
              {{saving_throw_success}}
            </div>
          {{/saving_throw_success}}
        </div>
      {{/saving_throw_dc}}
      {{#damage}}
        <div class="shaped-row zebra center vert-center{{#hide_damage}} gm-info-flex{{/hide_damage}}">
          <div class="col-47">
            <div class="output">
              {{damage}}
              {{#rollWasCrit() roll1}}
                <span>+ {{crit_damage}}</span>
              {{/rollWasCrit() roll1}}
              {{#^rollWasCrit() roll1}}
                {{#rollWasCrit() roll2}}
                  <span>+ {{crit_damage}}</span>
                {{/rollWasCrit() roll2}}
              {{/^rollWasCrit() roll1}}
            </div>
            <div class="output-small-label">{{damage_type}}{{^damage_type}}<span class="lowercase" data-i18n="DAMAGE"></span>{{/damage_type}}</div>
          </div>
      {{/damage}}
      {{#second_damage}}
        {{#damage}}
          <div class="output">+</div>
        {{/damage}}
        {{^damage}}
          <div class="shaped-row zebra center vert-center">
        {{/damage}}
          <div class="col-47">
            <div class="output">
              {{second_damage}}
              {{#rollWasCrit() roll1}}
                <span>+ {{second_crit_damage}}</span>
              {{/rollWasCrit() roll1}}
              {{#^rollWasCrit() roll1}}
                {{#rollWasCrit() roll2}}
                  <span>+ {{second_crit_damage}}</span>
                {{/rollWasCrit() roll2}}
              {{/^rollWasCrit() roll1}}
            </div>
            <div class="output-small-label">{{second_damage_type}}{{^second_damage_type}}<span class="lowercase" data-i18n="DAMAGE"></span>{{/second_damage_type}}</div>
          </div>
        {{^damage}}
          </div>
        {{/damage}}
      {{/second_damage}}
      {{#damage}}
        </div>
      {{/damage}}
      {{#heal}}
        <div class="center vert-center output"><span data-i18n="HEAL_FOR"></span> {{heal}} <span data-i18n="HIT_POINTS"></span></div>
      {{/heal}}
      {{#death_saving_throw_successes}}
        <div class="center">
          <span data-i18n="SUCCESSES"></span> {{death_saving_throw_successes}} / 3
        </div>
      {{/death_saving_throw_successes}}
      {{#death_saving_throw_failures}}
        <div class="col-100 center">
          <span data-i18n="FAILURES"></span> {{death_saving_throw_failures}} / 3
        </div>
      {{/death_saving_throw_failures}}

      {{#cantrips}}
        <div class="{{#spells_text_size}}output{{/spells_text_size}}">
          <span class="bold italic"><span data-i18n="CANTRIPS"></span>.</span>
          {{cantrips}}
        </div>
      {{/cantrips}}
      {{#spells_level_1_show}}
        {{#spells_level_1}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="1st"></span>-<span data-i18n="level"></span> {{#spells_level_1_uses}}({{spells_level_1_uses}}){{/spells_level_1_uses}}.</span>
            {{spells_level_1}}
          </div>
        {{/spells_level_1}}
      {{/spells_level_1_show}}
      {{#spells_level_2_show}}
        {{#spells_level_2}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="2nd"></span>-<span data-i18n="level"></span> {{#spells_level_2_uses}}({{spells_level_2_uses}}){{/spells_level_2_uses}}.</span>
            {{spells_level_2}}
          </div>
        {{/spells_level_2}}
      {{/spells_level_2_show}}
      {{#spells_level_3_show}}
        {{#spells_level_3}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="3rd"></span>-<span data-i18n="level"></span> {{#spells_level_3_uses}}({{spells_level_3_uses}}){{/spells_level_3_uses}}.</span>
            {{spells_level_3}}
          </div>
        {{/spells_level_3}}
      {{/spells_level_3_show}}
      {{#spells_level_4_show}}
        {{#spells_level_4}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="4th"></span>-<span data-i18n="level"></span> {{#spells_level_4_uses}}({{spells_level_4_uses}}){{/spells_level_4_uses}}.</span>
            {{spells_level_4}}
          </div>
        {{/spells_level_4}}
      {{/spells_level_4_show}}
      {{#spells_level_5_show}}
        {{#spells_level_5}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="5th"></span>-<span data-i18n="level"></span> {{#spells_level_5_uses}}({{spells_level_5_uses}}){{/spells_level_5_uses}}.</span>
            {{spells_level_5}}
          </div>
        {{/spells_level_5}}
      {{/spells_level_5_show}}
      {{#spells_level_6_show}}
        {{#spells_level_6}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="6th"></span>-<span data-i18n="level"></span> {{#spells_level_6_uses}}({{spells_level_6_uses}}){{/spells_level_6_uses}}.</span>
            {{spells_level_6}}
          </div>
        {{/spells_level_6}}
      {{/spells_level_6_show}}
      {{#spells_level_7_show}}
        {{#spells_level_7}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="7th"></span>-<span data-i18n="level"></span> {{#spells_level_7_uses}}({{spells_level_7_uses}}){{/spells_level_7_uses}}.</span>
            {{spells_level_7}}
          </div>
        {{/spells_level_7}}
      {{/spells_level_7_show}}
      {{#spells_level_8_show}}
        {{#spells_level_8}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="8th"></span>-<span data-i18n="level"></span> {{#spells_level_8_uses}}({{spells_level_8_uses}}){{/spells_level_8_uses}}.</span>
            {{spells_level_8}}
          </div>
        {{/spells_level_8}}
      {{/spells_level_8_show}}
      {{#spells_level_9_show}}
        {{#spells_level_9}}
          <div class="{{#spells_text_size}}output{{/spells_text_size}}">
            <span class="bold italic"><span data-i18n="9th"></span>-<span data-i18n="level"></span> {{#spells_level_9_uses}}({{spells_level_9_uses}}){{/spells_level_9_uses}}.</span>
            {{spells_level_9}}
          </div>
        {{/spells_level_9}}
      {{/spells_level_9_show}}

      {{#text_center}}
        <div class="center">{{text_center}}</div>
      {{/text_center}}
      {{#text}}
        <div>{{text}}</div>
      {{/text}}
      {{#text_big}}
        <div class="output">{{text_big}}</div>
      {{/text_big}}
      {{#allprops() freetext text text_center text_big text_top character_name saving_throw title ignore show_character_name subheader uses uses_max roll1 roll2 advantage disadvantage vs_ac ability emote death_saving_throw death_saving_throw_successes death_saving_throw_failures targetAC targetName action type crit_name crit_text damage damage_type crit_damage second_damage second_damage_type second_crit_damage ranged damage target reach range ammo ammo_name spell saving_throw_condition saving_throw_dc saving_throw_vs_ability saving_throw_success saving_throw_failure friendly_level school ritual content cast_as_level heal casting_time concentration duration components materials hide_saving_throw_dc hide_spell_content hide_freetext hide_attack hide_damage hide_saving_throw_failure hide_saving_throw_success recharge hide_recharge fx trait armor equipment cantrips spells_level_1 spells_level_1_uses spells_level_1_show spells_level_2 spells_level_2_uses spells_level_2_show spells_level_3 spells_level_3_uses spells_level_3_show spells_level_4 spells_level_4_uses spells_level_4_show spells_level_5 spells_level_5_uses spells_level_5_show spells_level_6 spells_level_6_uses spells_level_6_show spells_level_7 spells_level_7_uses spells_level_7_show spells_level_8 spells_level_8_uses spells_level_8_show spells_level_9 spells_level_9_uses spells_level_9_show spells_text_size}}
        <div>
          <span class="bold italic">{{key}}.</span>
          {{value}}
        </div>
      {{/allprops() freetext text text_center text_big text_top character_name saving_throw title ignore show_character_name subheader uses uses_max roll1 roll2 advantage disadvantage vs_ac ability emote death_saving_throw death_saving_throw_successes death_saving_throw_failures targetAC targetName action type crit_name crit_text damage damage_type crit_damage second_damage second_damage_type second_crit_damage ranged damage target reach range ammo ammo_name spell saving_throw_condition saving_throw_dc saving_throw_vs_ability saving_throw_success saving_throw_failure friendly_level school ritual content cast_as_level heal casting_time concentration duration components materials hide_saving_throw_dc hide_spell_content hide_freetext hide_attack hide_damage hide_saving_throw_failure hide_saving_throw_success recharge hide_recharge fx trait armor equipment cantrips spells_level_1 spells_level_1_uses spells_level_1_show spells_level_2 spells_level_2_uses spells_level_2_show spells_level_3 spells_level_3_uses spells_level_3_show spells_level_4 spells_level_4_uses spells_level_4_show spells_level_5 spells_level_5_uses spells_level_5_show spells_level_6 spells_level_6_uses spells_level_6_show spells_level_7 spells_level_7_uses spells_level_7_show spells_level_8 spells_level_8_uses spells_level_8_show spells_level_9 spells_level_9_uses spells_level_9_show spells_text_size}}

      {{#freetext}}
        <div class="{{#hide_freetext}} gm-info-block{{/hide_freetext}}">{{freetext}}</div>
      {{/freetext}}
      {{#crit_name}}
        {{#rollWasCrit() roll1}}
          <div>
            <span class="bold italic">{{crit_name}}.</span>
            {{crit_text}}
          </div>
        {{/rollWasCrit() roll1}}
        {{#^rollWasCrit() roll1}}
          {{#rollWasCrit() roll2}}
            <div>
              <span class="bold italic">{{crit_name}}.</span>
              {{crit_text}}
            </div>
          {{/rollWasCrit() roll2}}
        {{/^rollWasCrit() roll1}}
      {{/crit_name}}
      {{#recharge}}
        <div class="center{{#hide_recharge}} gm-info-block{{/hide_recharge}}">
          <span class="bold italic"><span data-i18n="RECHARGE"></span>.</span>
          {{recharge}}
        </div>
      {{/recharge}}
    </div>
  </div>
</rolltemplate>